\documentclass[12pt,twoside,english]{article}
\usepackage[utf8]{inputenc}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% template for II2202 proposal
%% original 2020.08.28
%% revised  
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%

\input{lib/includes}
\input{lib/acronyms}

% Keywords command
\providecommand{\keywords}[1]
{
  \small	
  \textbf{\textit{Keywords:}} #1
}

\title{Trade-offs Between Immersion and Energy Consumption With Automatic Naturalistic Lighting in Augmented Reality}
\author{
        \textsc{Stefano Formicola}
            \qquad
        \textsc{Christoph Albert Johns}
        \mbox{}\\
        \normalsize
            \texttt{formico}
        \textbar{}
            \texttt{cajohns}
        \normalsize
            \texttt{@kth.se}
}
\date{\today}


\lhead{II2202, Fall 2020, Period 1-2}
%% or \lhead{II2202, Fall 2020, Period 1}
\chead{Draft Project Report}
\rhead{\date{\today}}

\makeatletter
\let\ps@plain\ps@fancy 
\makeatother

\setlength{\headheight}{15pt}
\begin{document}

\maketitle


\begin{abstract}
\label{sec:abstract}

This research project proposes and tests a method to investigate the effect of automatic naturalistic lighting in \gls{AR} applications on immersion and on energy consumption.
A simple open-source card-matching game is modified to implement and control the corresponding rendering setting as provided by Apple's \gls{AR} \gls{API} RealityKit and tested with a small sample of users.
A within-subject research design with a small convenience sample is chosen to measure immersion through the \gls{IEQ} while overall \gls{CPU} usage is monitored and logged for both test conditions in randomized order.
A Mann-Whitney-U-test is used to test for significant differences in immersion and \gls{CPU} usage between both conditions.
The pre-test shows that the proposed method is generally appropriate to test the hypothesized relationships.
For a large-scale study, usability issues of the sample application should be resolved for more reliable measures or another application could be considered.
Additionally, it should be considered whether the \gls{IEQ} should be replaced with a questionnaire that is more specific to \gls{AR} applications.
The preliminary results seem to suggest that neither immersion nor \gls{CPU} usage are significantly affected by automatic naturalistic lighting, although a larger scale study is required for a more meaningful account.

\end{abstract}

%TC:ignore
\keywords{Augmented reality, Lighting, Immersion, Energy consumption}
%TC:endignore
\clearpage

\selectlanguage{english}
\tableofcontents

\section*{List of Acronyms and Abbreviations}
\label{list-of-acronyms-and-abbreviations}
\renewcommand{\glossarysection}[2][]{} %% skip the title
\printglossary[type=\acronymtype, nonumberlist]

\clearpage
\section{Introduction}
\label{sect:introduction}

% What is the problem?
In recent years, increasingly advanced features for \gls{AR} have become readily available to developers and designers in the form of easy-to-use \glsplural{API}.
Apple's \gls{AR} \gls{API} RealityKit, for example, has enabled creators to easily add occlusion, video textures, and shared states to their \gls{AR} applications \cite{apple_realitykit_2020-1}.
One of the especially notable features implemented by this \gls{API} has been real-time light estimation \cite{apple_arlightestimate_2020}.
Applications that enable this feature gain access to information about a scene's lighting with every video frame that is delivered to the current session \cite{apple_arlightestimate_2020}.
This information can then be used to apply dynamic shading to virtual objects matching the real-world lighting conditions \cite{apple_arlightestimate_2020}.
Apple's RealityKit \gls{API} enables this feature by default and-–depending on the available hardware–-uses one or multiple probes in the scene to measure and estimate this so called "environment lighting".
The resulting lighting estimate is then applied to the virtual objects in the scene \cite{apple_disablearenvironmentlighting_2020}.
To achieve this naturalistic lighting, camera-sensor data is continuously processed and evaluated to estimate and approximate the environment's lighting conditions and dynamically add the appropriate shading to the objects in a scene~\cite{apple_arlightestimate_2020,apple_disablearenvironmentlighting_2020}.
Depending on the scene and lighting conditions, this can be a computationally intensive process~\cite{steed_constructing_2016}.
Enabling this feature could, therefore, lead to increased scene realism at the cost of decreased energy efficiency.
This research aims at illuminating the relationship between immersion and energy impact in deploying automatic naturalistic lighting, thus empowering developers and designers to decide the most appropriate feature sets for their applications considering both user experience and sustainability aspects.
While there have been user-based studies evaluating visual characteristics of \gls{AR} objects, this particular aspect of automatic naturalistic lighting appears not to have been examined yet.


% What are the major contributions?
Examining the problem statement, two eventual outcomes of our project are possible:
If we find a trade-off between immersion and energy consumption, designers and developers should be recommended to avoid continuous \gls{AR} light estimation in order to free resources for either alternative uses or to extend battery life.
If we find no trade-off, developers and designers can be responsibly encouraged to implement the feature in order to enhance overall immersion.
Each outcome could be considered a worthwhile contribution to the field of \gls{AR} and immersion research.
The expected deliverables for our project are: an example \gls{AR} application to measure immersion levels and monitor energy consumption; a pre-tested and evaluated method (setup, procedure, and analysis) for a full-scale study; an indication for the results of a full-scale study.


% What are the research questions?
Overall, we will explore the following questions:

\begin{description}
    \item[RQ1.] Do users perceive a difference in immersion between enabled and disabled automatic naturalistic lighting?
    \item[RQ1a.] If they perceive a difference, are the participants able to tell that lighting is the cause?
    \item[RQ2.] How does enabling automatic naturalistic lighting affect \gls{CPU} usage?
\end{description}

Energy consumption will be measured in terms of \gls{CPU} usage for two major reasons.
First, because there is no dedicated \gls{GPU} in the mobile devices we will be testing, so the \gls{CPU} will handle all processing related to the \gls{AR} experience.
And second, because CPU usage can very finely be measured on the test device in contrast to general energy consumption.
While we are aware that we will only be able to test the proposed method on a small scale, we hypothesize the following outcomes for a full-scale experiment.


% What are the hypotheses?
As will be further explained in section \ref{sect:related_works}, scene realism is positively correlated with presence and thereby immersion.
That is why we expect the lighting condition that more closely matches the scene's natural environment to lead to higher levels of immersion, resulting in the following hypothesis:

\begin{description}
    \item[H1.] Users experience higher immersion levels when automatic naturalistic lighting is enabled.
\end{description}

Because the difference between both conditions lies in a salient visual feature which affects \gls{AR} objects' color and reflections, we expect not only the indirect measure of immersion as assessed through the \gls{IEQ} to be affected.
We instead hypothesize that users will recognize the difference between both conditions and will be able to articulate how they differ without support from the examiner.
This leads us to this hypothesis:

\begin{description}
    \item[H1a.] Users are able to tell that the lighting was different between both runs of the experiment.
\end{description}

Finally, regarding the energy impact of naturalistic lighting, we expect the computationally intensive continuous probing and estimation of the \gls{AR} scenes environment lighting to lead to higher levels of overall \gls{CPU} usage:

\begin{description}
    \item[H2.] \gls{CPU} usage is higher when automatic naturalistic lighting is enabled.
\end{description}


\section{Related Works}
\label{sect:related_works}

Our research project builds on two main lines of research: prior works evaluating the relationship between visual characteristics of \gls{AR} objects and user experience (e.g.~\cite{gabbard_effects_2006}) and research on the approximation of natural lighting conditions within virtual scenes in augmented reality (e.g.~\cite{aittala_inverse_2010}).
While there has been extensive research on the effect of design decisions on several aspects of user experience in digital games~\cite{johnson_validation_2018} -- even in \gls{AR} games in a few instances (e.g.~\cite{georgiou_development_2017}) -- the effect of lighting and more specifically automatic naturalistic lighting in \gls{AR} games on immersion seems not to have been examined yet.

While several aspects of the experience when playing videos games in general and \gls{AR} games in particular have been defined and measured as well (see~\cite{dey_systematic_2018, dunser_survey_2008} for overviews), we chose to investigate the effect of automatic naturalistic lighting on immersion because--in contrast to, for example, \textit{flow}~\cite{csikszentmihalyi_flow_1990}--it is independent from optimal experience, which our method will not be able to produce, and very likely to relate to visual presentation and, therefore, lighting~\cite{jennett_measuring_2008}.
As Witmer and Singer argue, "scene realism" is one of the governing factors for presence in virtual environments~\cite{witmer_measuring_1998}, which in turn affects how immersive a virtual environment appears~\cite{jennett_measuring_2008}.
We reason that automatic naturalistic lighting enhances this sense of realism and will therefore affect users' sense of immersion.


\section{Method}
\label{sect:method}

We will modify an existing \gls{AR} mobile game based on player concentration as a sample application to test immersion levels and energy consumption during usage.
Immersion will be measured through the \gls{IEQ}, \gls{CPU} usage will be measured over time through Xcode's Developer Tools.
Because of its popularity across countries and languages, we consider the game \textit{Memory} or \textit{Concentration}, in which players have to remember the order and color of different cards, a valid candidate for the experiment.

The implementation will be done for iOS devices and developed on Apple's \gls{IDE} Xcode using the ARKit and RealityKit frameworks.
The user interface will include a toggle button invisible to the player that enables and disables the automatic naturalistic lighting feature for the two runs of the experiment.

The experiment will consist of one three-minute session of gameplay for each condition, with and without the automatic naturalistic lighting, per subject.
During each phase of the experiment a non-invasive data collection will be performed using Xcode Developer Tools' \emph{Instruments} to measure the computational load.

Finally, we will measure subjects' immersion levels for each condition using the \gls{IEQ} proposed by Jennett et al.~\cite{jennett_measuring_2008}.

The project will use a within-subjects design to empirically test two different lighting conditions in an experiment setting and analyze the results using statistical methods.
In the following, the targeted participant profile as well as study procedure, data collection, and data analysis will be described.

\subsection{Participants}
\label{sect:participants}

The participants were recruited via an opportunity sample and were -- due to the difficulties and restrictions regarding gatherings of people during the COVID-19 pandemic -- mostly international students living at KTH Main Campus.
To limit the effect of novelty on immersion levels, participants were required to have had played a card-matching game similar to the sample game before.
It was, however, not required that they have played a digital version of this game before taking part in the experiment.
To further mitigate the effect of novelty, participants were required to have experienced an \gls{AR} scene on a mobile handheld device before.
Overall, seven participants took part in this study.
They had an average age of 24.7 (SD = 1.60), ranging from 23 to 28 years.
All seven participants were male.

\subsection{Procedure}
\label{sect:procedure}

We will modify an open-source \gls{AR} card-matching game~\cite{cobb_maxxfrazerrealitykit-cardflip_2020} to include an option to enable and disable automatic naturalistic lighting using RealityKit's \textit{.disableAREnvironmentLighting} render option for a repeated measures study design.
The sample game will be presented to participants on an Apple iPad in an indoor setting with controlled lighting where participants will be asked to complete as many rounds of the card-matching game for each of the two lighting conditions as they can, before they are interrupted after three minutes and the render option is changed for the second run.
The order of render options will be randomized to improve reliability.
The purpose of the experiment will be stated to the participants only in general terms as "investigating immersion in \gls{AR} games" to avoid influencing their perception of the scene by directing their attention towards lighting.
Participants will not be informed about the currently active render option for the same reason.
The sample application has been chosen due to its simplicity in functionality and visual presentation as well as general familiarity, thereby reducing the risk of errors in use or unwanted effects on immersion due to scene complexity or novelty.
To further negate this risk and to address the concerns brought up by Jennett et al.~\cite{jennett_measuring_2008} regarding the effect of prior experience on immersion, participants will be given a trial period with a third lighting condition: disabled automatic naturalistic lighting and an added point light above the scene.
The goal stated to the participants to complete the game as fast as possible and with as few errors as possible follows the study design of Jennett et al.~\cite{jennett_measuring_2008}.
It should allow for a more challenging experience across player ability levels and, therefore, increase flow~\cite{csikszentmihalyi_flow_1990} and thereby general immersion levels as well as reduce overall variance in immersion~\cite{jennett_measuring_2008}.
The first run will be started, after the participant indicates that they are ready for the experiment to begin.
After the experiment, participants will be debriefed and fully informed about the purpose of the study and given the opportunity to withdraw their consent.
The expected duration of the experiment per participant is 30 minutes.

\subsection{Data collection}
\label{sect:data_collection}

During each run of the experiment, the \gls{IDE} Xcode and more specifically its \textit{Instruments} feature~\cite{apple_xcode_2020} will be used to log the test device's \gls{CPU} usage according to Apple's type definitions~\cite{apple_system_2020} in three second intervals.
While there is a more general power metric that can be logged through the same application~\cite{apple_energy_2020-1}, that metric is discrete and inelastic towards enabled and disabled automatic naturalistic lighting and was, therefore, not used.
We discussed and decided not to have participants think aloud during their app usage to avoid unwanted effects on their experience and, thus, immersion~\cite{van_den_haak_retrospective_2003}.
After each run, participants will be asked to fill out the \gls{IEQ} (see Appendix \ref{sect:ieq}) to measure their levels of immersion dependent on the lighting treatment.
After the second run, participants will additionally be asked about their general experience using the application and to elaborate on any differences they noticed between both runs.
While alternatives such as tracking eye movement or measuring reaction times could also be used to measure immersion~\cite{jennett_measuring_2008}, we chose a questionnaire approach as the most economical option that still has satisfactory precedence in literature~\cite{boyle_engagement_2012}.
If a participant mentions one of the words "light", "lighting", "color", or "contrast" while answering these questions, the difference in lighting is considered as noticed by the user.

\subsection{Data analysis}
\label{sect:data_analysis}

After the above data has been successfully gathered, we will conduct a statistical analysis regarding the participants' immersion levels and the \gls{CPU} usage between both lighting conditions using Student's two-sample \textit{t}-test in R to check for significant differences.
We chose this measure as it can be considered quite robust even with small and extremely small ($ N \leq 5 $) sample sizes~\cite{de_winter_using_2013} and because it was used by Jennett et al. in their original experiments~\cite{jennett_measuring_2008}.
If, however, the \textit{t}-test's assumption of normal distribution is not met, we will instead conduct a Mann-Whitney U-test to compare the two conditions following the example of Nordin et al.~\cite{nordin_attention_2013} in their immersion experiments.
Additionally, we will report the results of the interview.

We are aware that both the results of our analysis of variance and the results of our interviews should not be used to infer knowledge about either the effect of automatic naturalistic lighting on immersion or on energy consumption.
Rather, the analysis is carried out in order to evaluate the chosen methods and to illustrate how such analysis should be done if the same study were carried out on a larger scale.


\section{Results}
\label{sect:results}

Some text about results here.


\section{Discussion}
\label{sect:discussion}

Some text about discussion here.



\bibliography{II2202-proposal}
% \bibliographystyle{IEEEtran}
\bibliographystyle{myIEEEtran}

\appendix
\section{Appendix: Immersive Experience Questionnaire}
\label{sect:appendix}
\label{sect:ieq}
\subfile{lib/ieq}

\clearpage
\end{document}
